apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: frontend
  namespace: blog-app
spec:
  host: frontend.blogapp.svc.cluster.local
  subsets:
  - name: v1
    labels:
      version: v1
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: posts
  namespace: blog-app
spec:
  host: posts.blogapp.svc.cluster.local
  subsets:
  - name: v1
    labels:
      version: v1
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: users
  namespace: blog-app
spec:
  host: users.blogapp.svc.cluster.local
  subsets:
  - name: v1
    labels:
      version: v1
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: reviews
  namespace: blog-app
spec:
  host: reviews.blogapp.svc.cluster.local
  subsets:
  - name: v1
    labels:
      version: v1
---
apiVersion: networking.istio.io/v1
kind: DestinationRule
metadata:
  name: ratings
  namespace: blog-app
spec:
  host: ratings.blogapp.svc.cluster.local
  subsets:
  - name: v1
    labels:
      version: v1
  - name: v2
    labels:
      version: v2